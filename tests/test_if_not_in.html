<html>
<head>
<script src="pythonscript.js"></script>

<script type="text/python">

class A:
	def __init__(self):
		self.x = 1
		self.y = 2

	def __contains__(self, name):
		with javascript:
			if name in Object.keys(self):
				return True

class B:
	pass

def todo():

	b = B()
	#if '__name__' in b: print 'this will throw an error because B is lacking a __contains__ method'
	with javascript:
		if '__class__' in b:
			print 'this is allowed because we are within-javascript where the rules are slightly different'
			print 'class name of instance b:', b['__class__']['__name__']

	print 'test complete'


def test():
	print 'testing list'
	if 100 not in [1,2,3]: print 'OK'
	else: print 'in list fails'

	print 'testing dict'
	if 100 not in {1:True}: print 'OK'
	else: print 'in dict fails'

	print 'testing tuple'
	if 100 not in (1,2,3): print 'OK'
	else: print 'in tuple fails'

	print 'testing int32 array'
	arr = array('int32', [1,2,3,4])
	print 'testing get item from array'
	arr[0]
	print 'testing item in array'
	if 100 not in arr: print 'OK'
	else: print 'in array failed'

	print 'testing overloaded custom class A'
	a = A()
	if 'XXX' not in a: print 'OK'
	else: print 'instance of overloaded A failed'


	with javascript:
		print 'testing with javascript:'
		arr = [1,2,3]
		jsob = {1:True}
		if 100 not in arr: print 'OK'
		else: print 'in Array failed'
		if 100 not in jsob: print 'OK'
		else: print 'in javascript-object failed'

		if 100 not in [1,2]: print 'OK'
		else: print 'in literal Array failed'
		if 'XXX' not in {xx:True}: print 'OK'
		else: print 'in literal jsobject failed'

		if 'o' in 'hello': print 'o in hello works OK'
		else: print 'o in hello FAILED'

		if 'X' not in 'hello': print 'X not in hello works OK'
		else: print 'o not in hello FAILED'

</script>
</head>

<body>
<button onclick="test()">click me</button>
</body>
</html>